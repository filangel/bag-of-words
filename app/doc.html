<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Analysis</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><h1 id="text-analysis"><strong>Text Analysis</strong></h1>



<h2 id="flow-graph">Flow Graph</h2>



<div class="flow-chart"><svg height="548.19921875" version="1.1" width="1206.1640625" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.93060302734375px; top: -0.421875px;"><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock33-obj494" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS1:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj495" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS2:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj496" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS3:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj497" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS4:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj498" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS5:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj499" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS6:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj500" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS7:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj502" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS8:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker><marker id="raphael-marker-endblock33-obj504" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5"><use NS9:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none"></use></marker></defs><path fill="#ffffff" stroke="#000000" d="M10,19.4375L0,38.875L103.984375,38.875L123.984375,0L20,0L10,19.4375" stroke-width="2" font-family="sans-serif" font-weight="normal" id="st" class="flowchart" transform="matrix(1,0,0,1,62.8672,25.9707)" style="font-family: sans-serif; font-weight: normal;"></path><text x="30" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="stt" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,62.8672,25.9707)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Text Input</tspan></text><rect x="0" y="0" width="89.375" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="op1" transform="matrix(1,0,0,1,317.0234,25.9707)" style=""></rect><text x="10" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="op1t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,317.0234,25.9707)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Input Filter </tspan></text><rect x="0" y="0" width="201.75" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="sb1" transform="matrix(1,0,0,1,260.8359,140.8164)" style=""></rect><rect x="10" y="0" width="181.75" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" id="sb1i" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,260.8359,140.8164)" style="font-family: sans-serif; font-weight: normal;"></rect><text x="20" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="sb1t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,260.8359,140.8164)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Array&lt;word&gt; (data_array) </tspan></text><rect x="0" y="0" width="215.859375" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="sb2" transform="matrix(1,0,0,1,529.5156,140.8164)" style=""></rect><rect x="10" y="0" width="195.859375" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" id="sb2i" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,529.5156,140.8164)" style="font-family: sans-serif; font-weight: normal;"></rect><text x="20" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="sb2t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,529.5156,140.8164)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">HashMap&lt;word, frequency&gt; </tspan></text><rect x="0" y="0" width="93.203125" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="op2" transform="matrix(1,0,0,1,590.8438,255.6621)" style=""></rect><text x="10" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="op2t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,590.8438,255.6621)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Bucket Sort </tspan></text><rect x="0" y="0" width="241.71875" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="sb3" transform="matrix(1,0,0,1,516.5859,370.5078)" style=""></rect><rect x="10" y="0" width="221.71875" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" id="sb3i" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,516.5859,370.5078)" style="font-family: sans-serif; font-weight: normal;"></rect><text x="20" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="sb3t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,516.5859,370.5078)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Array&lt;word&gt; $scope.sortedKeys </tspan></text><path fill="#ffffff" stroke="#000000" d="M41.408203125,20.7041015625L0,41.408203125L82.81640625,82.81640625L165.6328125,41.408203125L82.81640625,0L0,41.408203125" stroke-width="2" font-family="sans-serif" font-weight="normal" id="cond" class="flowchart" transform="matrix(1,0,0,1,850.3477,348.5371)" style="font-family: sans-serif; font-weight: normal;"></path><text x="46.408203125" y="41.408203125" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="condt" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,850.3477,348.5371)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.330078125">Output Filter</tspan></text><rect x="0" y="0" width="52.640625" height="38.875" rx="0" ry="0" fill="#ffffff" stroke="#000000" stroke-width="2" class="flowchart" id="op3" transform="matrix(1,0,0,1,906.8438,507.3242)" style=""></rect><text x="10" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="op3t" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,906.8438,507.3242)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">Filter</tspan></text><path fill="#ffffff" stroke="#000000" d="M10,19.4375L0,38.875L119.640625,38.875L139.640625,0L20,0L10,19.4375" stroke-width="2" font-family="sans-serif" font-weight="normal" id="en" class="flowchart" transform="matrix(1,0,0,1,1064.5234,507.3242)" style="font-family: sans-serif; font-weight: normal;"></path><text x="30" y="19.4375" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" id="ent" class="flowchartt" font-weight="normal" transform="matrix(1,0,0,1,1064.5234,507.3242)" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.328125">DOM Update</tspan><tspan dy="18" x="30"></tspan></text><path fill="none" stroke="#000000" d="M176.8515625,45.408203125C176.8515625,45.408203125,293.71648924052715,45.408203125,314.03090033409535,45.408203125" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj494)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M361.7109375,64.845703125C361.7109375,64.845703125,361.7109375,123.72704445244744,361.7109375,137.81486537551837" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj495)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M462.5859375,160.25390625C462.5859375,160.25390625,513.4864085838199,160.25390625,526.5097713025316,160.25390625" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj496)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M637.4453125,179.69140625C637.4453125,179.69140625,637.4453125,238.57274757744744,637.4453125,252.66056850051837" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj497)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M637.4453125,294.537109375C637.4453125,294.537109375,637.4453125,353.41845070244744,637.4453125,367.50627162551837" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj498)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M758.3046875,389.9453125C758.3046875,389.9453125,831.4745535068214,389.9453125,847.337551801269,389.9453125" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj499)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M933.1640625,431.353515625C933.1640625,431.353515625,933.1640625,490.23485695244744,933.1640625,504.32267787551837" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj500)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><text x="938.1640625" y="441.353515625" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" font-weight="normal" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.337890625">yes</tspan></text><path fill="none" stroke="#000000" d="M1015.98046875,389.9453125C1015.98046875,389.9453125,1134.34375,389.9453125,1134.34375,389.9453125C1134.34375,389.9453125,1134.34375,485.9840820173267,1134.34375,504.31960881482416" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj502)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path><text x="1020.98046875" y="379.9453125" text-anchor="start" font-family="sans-serif" font-size="14px" stroke="none" fill="#000000" font-weight="normal" style="text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;"><tspan dy="5.3359375">no</tspan></text><path fill="none" stroke="#000000" d="M959.484375,526.76171875C959.484375,526.76171875,1053.4055696562864,526.76171875,1071.520253195951,526.76171875" stroke-width="2" marker-end="url(#raphael-marker-endblock33-obj504)" font-family="sans-serif" font-weight="normal" style="font-family: sans-serif; font-weight: normal;"></path></svg></div>

<h2 id="time-complexity">Time Complexity</h2>

<blockquote>
  <p><em>n</em> is the <em>number of characters in Text Input</em>. <br>
  We operate on strings, but still <strong>O(N) &#8712 O(n)</strong>,  <br>
  where <em>N</em> is the number of words in the text, <br>
  since <em>N = An</em>,  where <em>A</em> the average length of a word in the text. </p>
</blockquote>

<ul>
<li>Input Filter <br>
<ul><li>Lowercase everything <strong>O(n)</strong>.</li>
<li>Remove symbols (!@#$%^&amp;*&lt;&gt;?()[]{}|~ etc) <strong>O(n)</strong>.</li></ul></li>
<li>Split filtered text to array <strong>O(n)</strong>.</li>
<li>Hash each word in the array and increment <strong>O(N)</strong>.</li>
<li>Bucket Sort (Counting Sort) the keys <strong>O(k)</strong> where k is the number of distinct words in the text  (k â‰¤ N).</li>
<li>Output Filter  <strong>O(n)</strong>. <br>
<ul><li>Pick the M (user-defined) most frequent words to display <strong>O(M)</strong>.</li></ul></li>
</ul>

<p><strong>Total Complexity:</strong> O(N) &#8712 O(n).</p>

<h3 id="bucket-sort">Bucket Sort</h3>

<p><strong>Aim</strong>: Sort the keys of the Map based on frequency (number of occurrences).</p>

<p><strong>Algorithm</strong>: <br>
1. Group words into nested arrays (or buckets) indexed by the word frequency <strong>O(k)</strong>.</p>

<pre class="prettyprint"><code class="language-javascript hljs ">  <span class="hljs-number">0</span>           <span class="hljs-number">1</span>             <span class="hljs-number">3</span>        <span class="hljs-number">4</span>
[[ ], [goal, time, trash], [ ], [holiday]]</code></pre>

<ol>
<li>Keep track of the maximum frequency <strong>O(k)</strong>.</li>
<li>Store the <em>keys</em> of the generated nested arrays, starting from maximum index <strong>O(k)</strong>.</li>
</ol>

<pre class="prettyprint"><code class="language-javascript hljs ">[holiday, trash, time, goal]</code></pre>

<h2 id="components">Components</h2>

<ul>
<li>Data binding: AngularJS 1.6.0-rc.2</li>
<li>UI Components: Bootstrap 3.3.7</li>
<li>Documentation: StackEdit</li>
</ul>

<h2 id="code">Code</h2>



<pre class="prettyprint"><code class="language-javascript hljs "><span class="hljs-comment">/*jshint esversion: 6 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-comment">// Get elements from DOM</span>
    <span class="hljs-keyword">var</span> input_text = document.getElementById(<span class="hljs-string">'input_txt'</span>);
    <span class="hljs-keyword">var</span> max_results = document.getElementById(<span class="hljs-string">'max_results'</span>);

    <span class="hljs-keyword">var</span> app = angular.module(<span class="hljs-string">'myApp'</span>, []);

    app.controller(<span class="hljs-string">'mainController'</span>, [<span class="hljs-string">'$scope'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($scope)</span> {</span>
        $scope.input_text = <span class="hljs-string">""</span>;
        $scope.max_results = <span class="hljs-string">""</span>;


        <span class="hljs-comment">// Events Handlers \\</span>

        <span class="hljs-comment">// max_results ng-keypress</span>
        $scope.isNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($event)</span> {</span>
            $event = ($event) ? $event : window.event;
            <span class="hljs-keyword">var</span> charCode = ($event.which) ? $event.which : $event.keyCode;
            <span class="hljs-keyword">if</span> (charCode &gt; <span class="hljs-number">31</span> &amp;&amp; (charCode &lt; <span class="hljs-number">48</span> || charCode &gt; <span class="hljs-number">57</span>)) {
                alert(<span class="hljs-string">"Please insert a number."</span>);
                $event.preventDefault();
            }
        };

        <span class="hljs-comment">// ng-show table </span>
        $scope.isDone = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> $scope.dict !== <span class="hljs-literal">undefined</span>;
        };

        <span class="hljs-comment">// disable/enable analysis btn </span>
        $scope.isReady = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> ($scope.input_text === <span class="hljs-string">''</span>);
        };

        <span class="hljs-comment">// analysis_btn ng-click</span>
        $scope.analiseText = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> max = ($scope.max_results!==<span class="hljs-string">""</span>) ? <span class="hljs-built_in">parseInt</span>($scope.max_results) : <span class="hljs-built_in">Number</span>.MAX_VALUE;
            <span class="hljs-comment">// FILTER</span>
            <span class="hljs-comment">// Lowercase </span>
            <span class="hljs-comment">// Remove Symbols</span>
            <span class="hljs-keyword">var</span> text = $scope.input_text.toLowerCase().replace(<span class="hljs-regexp">/[^a-z ]/g</span>, <span class="hljs-string">" "</span>); <span class="hljs-comment">// O(n)</span>
            <span class="hljs-comment">// Words Array</span>
            <span class="hljs-keyword">var</span> words = text.split(<span class="hljs-regexp">/\s+/</span>); <span class="hljs-comment">// O(n)</span>

            <span class="hljs-comment">// HashMap&lt;word, frequency&gt; $scope.dict</span>
            $scope.dict = <span class="hljs-keyword">new</span> Map();
            <span class="hljs-comment">// Split text into words </span>
            words.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(word)</span> {</span> <span class="hljs-comment">// O(n)</span>
                <span class="hljs-keyword">if</span> (word !== <span class="hljs-string">''</span>) {
                    <span class="hljs-comment">// hash the word =&gt; increment frequency </span>
                    $scope.dict.set(word, ($scope.dict.get(word) || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>); <span class="hljs-comment">// O(1) </span>
                }
            });

            <span class="hljs-comment">// SORT (Bucket Sort with Bucket Size = 1)</span>
            <span class="hljs-comment">// Sort the keys(word) of the Map according to the values(frequency)</span>
            <span class="hljs-comment">// Group words into nested arrays (or buckets) indexed by the word frequency.</span>
            <span class="hljs-comment">// i.e. wordsByFrequency[2] will be an array of all words found 2 times in the text.</span>
            <span class="hljs-comment">// Record the max frequency (in order to apply counting sort)</span>
            <span class="hljs-keyword">var</span> wordsByFrequency = [];
            <span class="hljs-keyword">var</span> maxFreq = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> word of $scope.dict.keys()) { <span class="hljs-comment">// O(k) where k the number of distinct words k&lt;=n</span>
                <span class="hljs-keyword">var</span> freq = $scope.dict.get(word);
                <span class="hljs-comment">// Initialise new bucket if not defined</span>
                wordsByFrequency[freq] = wordsByFrequency[freq] || [];
                <span class="hljs-comment">// Add element to bucket </span>
                wordsByFrequency[freq].push(word);
                <span class="hljs-comment">// Keep track of maxFreq</span>
                <span class="hljs-keyword">if</span> (freq &gt; maxFreq) maxFreq = freq;
            }

            $scope.sortedKeys = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = maxFreq; i &gt; <span class="hljs-number">0</span>; --i) { <span class="hljs-comment">// O(k) </span>
                <span class="hljs-keyword">if</span> (($scope.sortedKeys.length &lt; max)&amp;&amp;(wordsByFrequency[i])) { <span class="hljs-comment">// skip undefined entries of the array</span>
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> item of wordsByFrequency[i]) { 
                        <span class="hljs-keyword">if</span> ($scope.sortedKeys.length &gt;= max) <span class="hljs-keyword">break</span>;
                        $scope.sortedKeys.push(item);
                    }
                }
            }
        };
    }]);
} ());</code></pre>

<blockquote>
  <p><strong>Angelos Filos</strong>  <br>
  Imperial College London UTA <br>
  <a href="https://github.com/filangel"><strong>Github</strong></a> || <a href="https://linkedin.com/in/filangel"><strong>LinkedIn</strong></a></p>
</blockquote></div></body>
</html>